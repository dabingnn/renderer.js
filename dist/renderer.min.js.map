{"version":3,"sources":["./dist/renderer.dev.js"],"names":["renderer","gfx","vmath","memop","initTextures","device","canvas","document","createElement","context","getContext","width","height","fillStyle","fillRect","defaultTexture","Texture2D","images","wrapS","WRAP_REPEAT","wrapT","format","TEXTURE_FMT_RGB8","mipmap","initBuiltin","builtin","Object","assign","enums","PP_PROJECTION","PP_ORTHO","STAGE_OPAQUE","STAGE_TRANSPARENT","STAGE_SHADOWCAST","PARAM_INT","PARAM_INT2","PARAM_INT3","PARAM_INT4","PARAM_FLOAT","PARAM_FLOAT2","PARAM_FLOAT3","PARAM_FLOAT4","PARAM_COLOR3","PARAM_COLOR4","PARAM_MAT2","PARAM_MAT3","PARAM_MAT4","PARAM_TEXTURE_2D","PARAM_TEXTURE_CUBE","_m3_tmp","mat3","create","_m4_tmp","mat4","_stageInfos","FramePool","stage","items","_float2_pool","Float32Array","_float3_pool","_float4_pool","_float9_pool","_float16_pool","_int2_pool","Int32Array","_int3_pool","_int4_pool","_type2uniformValue","value","vec2","array","alloc","vec3","vec4","color3","color4","mat2","Renderer","anonymous","this","_device","_builtin","_type2defaultValue","obj","new","defaultTextureCube","_stage2fn","_drawItemsPools","RecyclePool","node","mesh","material","_stageItemsPools","technique","zdist","prototype","_reset","reset","_render","camera","scene","stages","this$1","setViewport","_rect","w","h","clear","color","depth","allDrawItems","i","_models","length","model","data","m","meshCount","drawItem","add","getDrawItem","i$1","stageItems","j","drawItem$1","tech","getTechnique","stageItem","stageInfo","i$2","info","fn","_draw","item","count","_vertexBuffer","setVertexBuffer","_indexBuffer","setIndexBuffer","getWorldMatrix","setUniform","transpose","invert","fromMat4","slot","_properties","prop","param","getParameter","name","undefined","val","type","console","warn","setTexture","convertFn","convertedValue","setPrimitiveType","_primitiveType","_passes","pass","setProgram","_program","setCullMode","_cullMode","_blend","enableBlend","setBlendFuncSep","_blendSrc","_blendDst","_blendSrcAlpha","_blendDstAlpha","setBlendEqSep","_blendEq","_blendAlphaEq","setBlendColor32","_blendColor","_depthTest","enableDepthTest","setDepthFunc","_depthFunc","_depthWrite","enableDepthWrite","_stencilTest","enableStencilTest","setStencilFuncFront","_stencilFuncFront","_stencilRefFront","_stencilMaskFront","setStencilOpFront","_stencilFailOpFront","_stencilZFailOpFront","_stencilZPassOpFront","_stencilWriteMaskFront","setStencilFuncBack","_stencilFuncBack","_stencilRefBack","_stencilMaskBack","setStencilOpBack","_stencilFailOpBack","_stencilZFailOpBack","_stencilZPassOpBack","_stencilWriteMaskBack","draw","_camPos","_camFwd","_v3_tmp1","_a16_view","_a16_proj","_a16_viewProj","ForwardRenderer","Renderer$$1","call","_opaqueStage","bind","_transparentStage","__proto__","constructor","render","updateMatrix","_view","_proj","_viewProj","sort","a","b","sortID","_node","getWorldPos","set","m02","m06","m10","sub","dot","item$1","forward","Mesh","vb","ib","pt","PT_TRIANGLES","createMesh","positions","error","verts","vcount","push","normals","uvs","vfmt","ATTR_POSITION","ATTR_TYPE_FLOAT32","num","ATTR_NORMAL","ATTR_UV","VertexBuffer","VertexFormat","USAGE_STATIC","indices","IndexBuffer","INDEX_FMT_UINT16","Uint16Array","Pass","program","CULL_BACK","BLEND_FUNC_ADD","BLEND_ONE","BLEND_ZERO","DS_FUNC_LESS","DS_FUNC_ALWAYS","STENCIL_OP_KEEP","cullMode","setBlend","blendEq","blendSrc","blendDst","blendAlphaEq","blendSrcAlpha","blendDstAlpha","blendColor","setDepth","depthTest","depthWrite","depthFunc","setStencilFront","stencilFunc","stencilRef","stencilMask","stencilFailOp","stencilZFailOp","stencilZPassOp","stencilWriteMask","setStencilBack","_genID","Technique","props","passes","_id","_stages","id","Material","techniques","params","_techniques","_params","setParameter","Light","_color","setNode","Camera","_perspective","_near","_far","_fov","Math","PI","_orthoHeight","x","y","_scissor","_invViewProj","aspect","perspective","ortho","mul","Model","_meshes","_materials","prototypeAccessors","addMesh","indexOf","addMaterial","get","out","index","defineProperties","Scene","_lights","FixedArray","addModel","idx","removeModel","fastRemove","window"],"mappings":"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"}